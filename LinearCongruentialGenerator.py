#input
# 13
# 1261 169 10 6 8
# 131 63712 69 22 11
# 1803 8 3338 2682 23
# 167 3 76 22 19
# 163 411240 55099 35664 13
# 901 9 5 1 22
# 89 9912 40838 35944 21
# 25 4 39548 3869 6
# 197 9620 2323 998 5
# 1079 9 247168 165345 9
# 563 34 15988 2408 23
# 67 98 3914 594 22
# 155 88032 224866 1635 17

lines = int(input())

for i in range(0, lines):
  (a, c, m, x0, n) = (int(x) for x in input().split())

  for j in range(0, n):
    x0 = (a * x0 + c) % m

  print(x0, "", end="")