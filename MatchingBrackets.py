#input
# 16
# [[f](e)({^}(g)([*]d)<-{f}>y){t}[{e}[c]b]]<a><t>
# (g)(u(e))<[(z)y](  )[-]{{t}<x{{+} }>a[x](< >v)}x) >(-){w<x>}{h}()
# <t]<<c<{(+)x}g[a>>>>(t)[(<<e>[((d)v)e]w>a){a} <->({(g)u<e>{w}}f)]
# [z](+)[{u)h]{e}[g](f)<-><<x{t}<v>>(^)c>(}
# ([t(u<d>)][w][d]([+((%)[ ]z)]z))<b[/<u>]{*}[u]><b>
# <>((*[[%]h{d][b[w]]}[+]{<^>-})(^{%})h(^)(/)){w}(x)
# <u>[x<x<+>>]<{d}[e]u>[<c[}]>{e}{b}{bd{b({+}x(g))(g)}e][h(b)]{{u}}
# [{{b}-[-]}{-<(h)^>}%{f}](f){[{z}<x><%><b -]}
# <f>[a<c>[a]]<*>{y}[<d>+]{<{g}d[}]>}({/}f)(x<+>)[(f){zg/(y<y>){g}]
# [{v}{c[+]}{/}(x)(<<%{c}>{-<x>}x>(z[w])u<<b>z(%)(%)<%>>)]
# <e><z {d}()(x<(c)e><w>(<f>[[b]/]b[{b} ][z])){u}
# {(*){h}c}(%)(<{y}(+)u ){[y](h)x([x{c}(+)]<^{*}>e)}[+]<h{/}>
# [t(u)<+>]({[ ]a}c){(*{h}[z])}{h}<[z]{x}e>
# (y)(a)<w<-[ ] y{ }}>>{<a{+}{(<*>v{%})b}[e]>}{[z<g>]e}<b[u]>
# <[{{b}c}y(g[h])]</>{+<x>}<g{*(a){ }}(y)>{^{x{[b]h}}}(h){y{u}}>( )
# <v>( ){-<x><x>}<{c}(*)[*(b) {y}< >(%)><v>(*)

import re

n = int(input())

brackets = {
  '(':')',
  '[':']',
  '{':'}',
  '<':'>',
  ')':'(',
  ']':'[',
  '}':'{',
  '>':'<'
}
pattern = '[\(\)\[\]\{\}\<\>]+'

for i in range(0, n):
  string = input()
  string = re.findall(pattern, string)
  string = "".join(string)

  